<!doctype html><html><head><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=https://hybrid-cloud-patterns.io/sass/patternfly-addons.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.3.0/css/solid.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.3.0/css/fontawesome.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.3.0/css/brands.css><title>Background on pattern development | Hybrid Cloud Patterns</title></head><body><div class=pf-c-page><header class=pf-c-page__header><div class=pf-c-page__header-brand><a href=/ class=pf-c-page__header-brand-link><img src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns"></a></div><div class=pf-c-page__header-tools><nav class="pf-c-nav pf-m-horizontal" role=navigation><ul class=pf-c-nav__list><li class=pf-c-nav__item><a class=pf-c-nav__link href=/patterns/ title=Patterns>Patterns</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/learn/ title=Learn>Learn</a></li><li class="pf-c-nav__item pf-m-current"><a class=pf-c-nav__link href=/contribute/ title=Contribute>Contribute</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/blog/ title=Blog>Blog</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/ci/ title=Status>Status</a></li></ul></nav></div></header><div class=pf-c-page__sidebar><div class=pf-c-page__sidebar-body><div class="pf-l-flex filter-title-div"><span class="pf-c-title pf-m-md filter-title pf-l-flex__item pf-m-grow">Menu</span></div><div class="pf-c-select pf-m-expanded"><div class=pf-c-select__menu><div class="pf-c-nav pf-m-light"><ul class=pf-c-nav__list><li class="pf-c-nav__item pf-m-expanded"><a href=/contribute/contribute-to-docs/ class=pf-c-nav__link>Contributor's guide</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=/contribute/background-on-pattern-development/ class="pf-c-nav__link pf-m-current">Background on pattern development</a><section class=pf-c-nav__subnav><ul class=pf-c-nav__list><li class="pf-c-nav__item pf-m-expanded"><a href=/contribute/structure/ class=pf-c-nav__link>Validated pattern structure</a></li></ul></section></li><li class="pf-c-nav__item pf-m-expanded"><a href=/contribute/extending-a-pattern/ class=pf-c-nav__link>Extending an existing pattern</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=/contribute/creating-a-pattern/ class=pf-c-nav__link>Creating a pattern</a></li></ul></div></div></div></div></div><main class=pf-c-page__main tabindex=0 data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=50><section class="pf-c-page__main-section pf-m-fill"><div class=pf-u-display-flex><div class="pf-c-content min-height"><h1 id=background-on-pattern-development>Background on pattern development</h1><h2 id=introduction>Introduction</h2><p>This section provides details on how to create a new pattern using the validated patterns framework. Creating a new pattern might start from scratch or it may start from an existing deployment that would benefit from a repeatable framework based on GitOps.</p><p>This introduction explains some of framework design decisions and why they were chosen. There are some high level concepts that are required for the framework. While those concepts can be implemented using a variety of open source projects, this framework is prescriptive and mentions the project and also (down stream) product that was used. E.g. For development builds we use Tekton (project) and specifically use OpenShift Pipelines (product).</p><p>The framework uses popular Cloud Native Computing Foundation (CNCF) <a href=https://landscape.cncf.io/>projects</a> as much as possible. The CNCF landscape contains many projects that solve the same or similar problem. The validated patterns effort has chosen specific projects but it is not unreasonable for users to switch out one project for another. (See more on Operators below).</p><p>There is no desire to replicate efforts already in CNCF. If new a open source project comes out of this framework, the plan would be to contribute that to CNCF.</p><h2 id=who-is-a-pattern-developer>Who is a pattern developer?</h2><p>Many enterprise class Cloud Native applications are complex and require many different application services integrated together. Organizations can learn from each other on how to create robust, scalable, and maintainable systems. When you find a pattern that seems to work, it makes sense to promote best practices to others in order for them to not repeat the many failures you probably made while getting to your killer pattern.</p><p>In the world of DevOps (including DevSecOps and GitOps), teams should include personnel from development, operations, security, and architects. What makes DevOps work is the collaboration of all these IT personnel, the business owners, and others. As DevOps practices move through your organization, best practices are shared and standards evolve.</p><p>This validated patterns framework has evolved since it was started in 2019. It will likely continue to evolve. What was learned is that there are some common concepts that need to be addressed once you desire to generalize your organizations framework.</p><p>Therefore, the goal is, that developers, operators, security, and architects will use this framework to have secure and repeatable day one deployment mechanism and maintenance automation for day two operations.</p><h2 id=a-common-platform>A common platform</h2><p>One of the most important goals of this framework is to provide consistency across any cloud provider - public or private. Public cloud providers each have Kubernetes distributions. While they keep up with the Kubernetes release cycle, they are not always running on the same version. Furthermore, each cloud provider has their own sets of services that developers often consume. So while you could automate the handling for each of the cloud providers, the framework utilizes one Kubernetes distribution that runs on public or private clouds - the hybrid and/or multi cloud model.</p><p>The framework depends on Red Hat OpenShift Container Platform (OCP). Once you have deployed Red Hat OCP wherever you wish to deploy your cloud native application pattern, then the framework can deploy on that platform in a few easy steps.</p><h2 id=containment-beyond-containers>Containment beyond containers</h2><p>If you are reading this chances are you are already familiar with Linux containers. But there is more to containers than Linux containers in the Cloud Native environment.</p><h3 id=containers>Containers</h3><p>Containers allow you to encapsulate your program/process and all its dependencies in one package called a container image. The container runtime starts an instance of this container using only the Linux kernel and the directory structure, with program and dependencies, provided in the container image. This ensures that the program is running isolated from any other packages, programs, or files loaded on the host system.</p><p>Kubernetes, and the Cloud Native community of services, use Linux containers as their basic building block.</p><h3 id=operators>Operators</h3><p>While Linux containers provide an incredibly useful way to isolate the dependencies for an application or application service, containers also require some lifecycle management. For example, at start up a container my need to set up access to networks, or extra storage. This type of set up usually happens with a human operator deciding on how the container will connect networks or host storage. The operator may also have to do routine maintenance. For example, if the container contains a database, the human operator may need to do a backup or routine scrubbing of the database.</p><p>Kubernetes <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/operator/>Operators</a> are an extension to Kubernetes <em>&ldquo;that make sue of custom resources to manage applications and their components.&rdquo;</em> I.e. it provides an extra layer of encapsulation on top of containers that packages up some operation automation with the container. It puts what the human operator would do into an Operator pattern for the service or set of services.</p><p>Many software providers/vendors have created operators to manage their application or service lifecycle. Red Hat OpenShift provides a <a href=https://catalog.redhat.com/software/operators/search>catalog of certified Operators</a> that application develops can consume as part of their overall application. The validated patterns makes use of these certified Operators as much as possible. Having a common platform like Red Hat OpenShift helps reduce risk by using certified Operators.</p><h3 id=validated-patterns>Validated patterns</h3><p>Assembling operators into a common pattern provides another layer of encapsulation. As with an Operator, where the developer can take advantage of the best practices from a experienced human operator, a validated pattern provides a way of taking advantage of best practices for deploying operators and other assets for a particular type of solution. Rather than starting from scratch to figure out how to deploy and manage a complex set of integrated and dependent containerized services, a developer can take a validated pattern and know that a lot of experience has been put into it.</p><p><a href=/images/framework/validated-patterns-stack.png><img src=/images/framework/validated-patterns-stack.png alt="Validated pattern stack"></a></p><p>A validated pattern has been tested and continues to be tested as the lifecycle of individual parts (Operators) change through release cycles. Red Hat&rsquo;s Quality Engineering team provides Continuous Integration of the pattern for new releases of Red Hat products (Operators).</p><p>The validated patterns framework takes advantage of automation technology. It uses Cloud Native automation technology as much as possible. Occasionally the framework resorts to some scripts in order to get a pattern up and running faster.</p><h2 id=automation-has-many-layers>Automation has many layers</h2><p>As mentioned above, gaining consistency and robustness for deploying complex Cloud Native applications requires automation. While many Kubernetes distributions, including OpenShift, provide excellent user interfaces for deploying and managing applications, this is mostly useful during development and/or debugging when things go wrong. Being able to consistently deploy complex applications is critical.</p><p>But which automation tool should be used? Or which automation tools, plural? During the development of the validated patterns framework we learned important lessons on the different areas of automation.</p><h3 id=automation-for-building-application-code>Automation for building application code</h3><p>When developing container based Cloud Native applications, a developer needs to build executable code and create a new container image for deployment into their Kubernetes test environment. Once tested, that container image needs to be moved through the continuous integration and continuous deployment (CI/CD) pipeline until it ends up in production. <a href=https://tekton.dev/>Tekton</a> is a Cloud Native CI/CD project that is build for hybrid-cloud. <a href=https://cloud.redhat.com/learn/topics/ci-cd>OpenShift Pipelines</a> is a Red Hat product based on Tekton.</p><h3 id=automation-for-application-operations>Automation for application operations</h3><p>There are two aspects to consider for operations when doing automation. First, you must be able to package up much of the configuration that is required for deploying Operators and pods. The validated patterns framework started with a project called Kustomize which allows you to assemble complex deployment YAML to apply to your Kubernetes cluster. Kustomize is a powerful tool, and almost achieved what we needed. However it fell short when we needed to propagate variable data into our deployment YAML. Instead we chose <a href=https://cloud.redhat.com/learn/topics/helm>Helm</a> because it provides templating and can therefore handle the injection of variable data into the deployment package. See more on templating <a href=https://helm.sh/docs/helm/helm_template/>here</a>.</p><p>The second aspect of automation for application automation deals with both workflow and GitOps. Validated patterns requires that a workflow deploys various components of the complex application. Visibility into the success or failure of those application components is really important. After the initial deployment it is important to role out configuration changes in an automated way using a code repository. This is achieved using GitOps. I.e. Using a Git repository as a mechanism to change configuration that triggers the automatic roll-out of those changes.</p><p><em>&ldquo;Application definitions, configurations, and environments should be declarative and version controlled. Application deployment and lifecycle management should be automated, auditable, and easy to understand.&rdquo;</em> - Argo CD project</p><p>OpenShift GitOps is based on the <a href=https://argo-cd.readthedocs.io/en/stable/>Argo CD</a> project. It is a GitOps continuous delivery tool for Kubernetes.</p><h2 id=secret-handling>Secret handling</h2><p>Validated patterns often depend on resources that require certificates or keys. These secrets need to be handled carefully. While it&rsquo;s tempting to focus on just the deployment of a pattern and &ldquo;handle security later&rdquo;, that&rsquo;s a bad idea. In the spirit of DevSecOps, the validated patterns effort has decided to &ldquo;shift security left&rdquo;. I.e. build security in early in the lifecycle.</p><p>When it comes to security, the approach requires patience and care to set up. There is no avoiding some manual steps but validated patterns tries to automate as much as possible while at the same time taking the lid off so developers can see what was and needs to be done.</p><p>There are two approaches to secret handling with validated patterns:</p><ul><li>Using special configuration files. This is fine for initial development but not for production.</li><li>Using a Cloud Native secrets handling tool e.g. <a href=https://www.vaultproject.io/docs/platform/k8s>Vault</a> or <a href=https://www.conjur.org/solutions/secrets-management/>Conjur</a></li></ul><p>Some of the validated patterns use configuration files (for now), while others, like the <a href=https://hybrid-cloud-patterns.io/multicloud-gitops/>Multicloud GitOps</a>, use Vault. See <a href=https://hybrid-cloud-patterns.io/secrets/vault/>Vault Setup</a> for more info.</p><h2 id=policy>Policy</h2><p>While many enterprise Cloud Native applications are open source, many of the products used require licenses or subscriptions. Policies help enforce license and subscription management and the channels needed to get access to those licenses or subscriptions.</p><p>Similarly, in multicloud deployments and complex edge deployments, policies can help define and select the correct GitOps workflows that need to be managed for various sites or clusters. E.g. defining an OpenShift Cluster as a &ldquo;Factory&rdquo; in the <a href=https://hybrid-cloud-patterns.io/industrial-edge/factory/>Industrial Edge</a> validated pattern provides a simple trigger to roll-out the entire Factory deployment. Policy is a powerful tool in automation.</p><p>Validated patterns use <a href=https://www.redhat.com/en/technologies/management/advanced-cluster-management>Red Hat Advanced Cluster Management for Kubernetes</a> to control clusters and applications from a single console, with built-in security policies.</p></div><aside class="pf-c-jump-links pf-m-vertical sticky pf-m-expandable pf-m-non-expandable-on-2xl" aria-label="Table of contents"><div class=pf-c-jump-links__header><div class=pf-c-jump-links__label><h1>Table of Contents</h1></div></div><nav id=TableOfContents><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#background-on-pattern-development>Background on pattern development</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#introduction>Introduction</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#who-is-a-pattern-developer>Who is a pattern developer?</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#a-common-platform>A common platform</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#containment-beyond-containers>Containment beyond containers</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#containers>Containers</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#operators>Operators</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#validated-patterns>Validated patterns</a></li></ul></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#automation-has-many-layers>Automation has many layers</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#automation-for-building-application-code>Automation for building application code</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#automation-for-application-operations>Automation for application operations</a></li></ul></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#secret-handling>Secret handling</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#policy>Policy</a></li></ul></li></ul></nav></aside></div></section><section id=prefooter class="pf-c-page__main-section footer-dark"><div class="pf-l-grid prefooter-menu-grid"><div class="pf-l-grid__item pf-m-12-col-on-sm pf-m-6-col-on-md pf-m-offset-1-col-on-md pf-u-mb-lg pf-u-mb-0-on-sm"><div class="pf-l-grid pf-u-py-xl"><div class="pf-l-grid__item pf-m-6-col-on-sm pf-m-4-col-on-md pf-u-ml-md pf-u-ml-0-on-md pf-u-mb-xl pf-u-mb-0-on-md"><p class="pf-c-title footer-menu-title">QUICKLINKS</p><nav aria-label="Quick Links"><ul class="pf-c-list pf-m-plain"><li><i class="prefooter-icon fa-brands fa-github"></i>
<a class=footer-link aria-label="GitHub repository" href=https://github.com/hybrid-cloud-patterns>GitHub repository</a></li><li><i class="prefooter-icon fas fa-check-circle"></i>
<a class=footer-link aria-label="Available patterns" href=/patterns>Available patterns</a></li></ul></nav></div><div class="pf-l-grid__item pf-m-6-col-on-sm pf-m-4-col-on-md pf-u-mt-lg pf-u-mt-0-on-sm pf-u-ml-md pf-u-ml-0-on-md pf-u-mb-xl pf-u-mb-0-on-md"><p class="pf-c-title footer-menu-title">CONTRIBUTE</p><nav aria-label=Contribute><ul class="pf-c-list pf-m-plain ws-org-pfsite-footer-menu-list"><li><i class="prefooter-icon fas fa-pen"></i>
<a class=footer-link aria-label="Documentation contributor guidelines" href=/contribute/contribute-to-docs/>Documentation</a></li><li><i class="prefooter-icon fas fa-code"></i>
<a class=footer-link aria-label="How to create a new pattern" href=/contribute/creating-a-pattern/>Patterns</a></li></ul></nav></div><div class="pf-l-grid__item pf-m-6-col-on-sm pf-m-4-col-on-md pf-u-mt-lg pf-u-mt-0-on-md pf-u-ml-md pf-u-ml-0-on-md"><p class="pf-c-title footer-menu-title">STAY IN TOUCH</p><nav aria-label="Stay in touch"><ul class="pf-c-list pf-m-plain"><li><i class="prefooter-icon fas fa-envelope"></i>
<a href=https://groups.google.com/g/hybrid-cloud-patterns class=footer-link target=top aria-label="Join the Validated Patterns mailing list">Mailing list</a></li></ul></nav></div></div></div><div class="pf-l-grid__item pf-m-12-col-on-sm pf-m-4-col-on-md"><div class="pf-l-grid pf-u-pt-xl"><div class="pf-l-grid__item pf-u-px-xl"><a class="pf-c-page__header-brand-link pf-c-brand pf-u-pb-md" href=/><img class=pf-c-brand src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns"></a><p class=footer-link>Hybrid Cloud Patterns are an evolution of how you deploy applications in a hybrid cloud. With a pattern, you can automatically deploy a full application stack through a GitOps-based framework. With this framework, you can create business-centric solutions while maintaining a level of Continuous Integration (CI) over your application.</p></div></div></div></div></section><footer id=footer class="footer-dark pf-m-no-fill pf-l-flex footer-center"><div class=pf-l-flex__item><a href=//www.redhat.com target=top aria-label="Visit Red Hat.com"><img src=/images/RHlogo.svg alt="Red Hat logo" width=145px height=613px></a><span class=site-copyright>Copyright &copy; 2023 Red Hat, Inc.</span></div><script src=/js/bootstrap.bundle.js></script></footer></main></div></body></html>